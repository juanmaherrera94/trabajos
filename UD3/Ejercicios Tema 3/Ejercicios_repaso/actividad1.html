<!DOCTYPE html>
<html lang="en">
 <!--
    Ejercicio 1
A partir del mismo, el usuario podrá elegir del menú:
1. Todos los usuarios: se mostrará una tabla con los valores que están en la variable
anterior.
2. Usuarios de una provincia: y a partir de la provincia introducida por el usuario se
mostrarán en una tabla los nombres y cuotas de las personas que viven en esa
provincia.
3. Usuarios que tengan una cuota mayor o menor que un valor: y se mostrarán en una
tabla los nombres de usuario, provicias y cuotas de aquellos que tienen una cuota
superior o inferior al valor introducido por el usuario (valora cuál es el mejor modo
de hacerlo).
    -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Actividad 1</title>
</head>

<body>
    <script>
        const clientes = `Cliente;Localidad;Cuota
    Laura;Santander;50
    Álvaro;Castro;50
    Igor;Castro;60
    Ivan;Santander;40
    Mónica;Zamora;30
    Javi;Bilbao;30
    David;Bilbao;50
    José Luis;Bilbao;60;`;

        const separar = clientes.split("\n");

        //metodo mostrar usuarios que mostraremos todos los datos en una tabla
        const mostrarUsuarios = () => {

            document.write("<table border='1'>");
            document.write("<tr>");
            document.write("<th>Cliente</th>");
            document.write("<th>Localidad</th>");
            document.write("<th>Cuota</th>");
            document.write("</tr>");

            separar.forEach(element => {
                const columnas = element.split(";");
                document.write("<tr>");
                columnas.forEach(columna => {
                    document.write("<td>" + columna + "</td>");
                });
                document.write("</tr>");
            });
            document.write("</table>");
        };
        //metodo que segun la pronvincia que escribamos nos mostrara los nombres y cuota de los que vivan en esa provincia
        const mostrarPorProvincias = (provincia) => {
            const usuarioProvincia = separar.filter(fila => fila.split(";")[1] === provincia);

            document.write("<table border='1'>");
            document.write("<tr>");
            document.write("<th>Cliente</th>");
            document.write("<th>Cuota</th>");
            document.write("</tr>");

            usuarioProvincia.forEach(element => {
            document.write("<tr>");
            document.write("<td>" + element.split(";")[0] + "</td>");
            document.write("<td>" + element.split(";")[2] + "</td>");
            document.write("</tr>");

            });
            document.write("</table>");
        };
        //metodo que nos muestra las cuotas mayores apartir de la cuota que escribamos
        const mostrarCuota=(cuota)=>{
            const cuotaMayor=[];
            separar.forEach(element => {
            const cuotaUsuario =parseFloat(element.split(";")[2]);
            
            if(cuota<cuotaUsuario){
                cuotaMayor.push(element.split(";"));
            }
                
            });

            document.write("<p>Mayores cuotas<p>")
            document.write("<table border='1'>");
            document.write("<tr>");
            document.write("<th>Cliente</th>");
            document.write("<th>Localidad</th>");
            document.write("<th>Cuota</th>");
            document.write("</tr>");

            cuotaMayor.forEach(element => {
                document.write("<tr>");
                element.forEach(columna => {
                    document.write("<td>" + columna + "</td>");
                });
                document.write("</tr>");
            });
            document.write("</table>");
        };

        

        const entrada = prompt("Elige 1 para mostrar los usuarios, Elige 2 para para insertar una provincia o elige 3 para insiertar un valor");
        switch (entrada) {
            case "1":
                mostrarUsuarios();
                break;
            case "2":
                let = insertar = prompt("Escribe una provincia");
                mostrarPorProvincias(insertar);
                break;
            case "3":
                let insert=parseFloat(prompt("Escribe una cuota"));
                mostrarCuota(insert);
                break;
            default:
                break;
        }
    </script>
</body>

</html>